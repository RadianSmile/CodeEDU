<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>teacher</title>
<!-- Common links -->
<!----><link rel="icon" type="image/png" href="/include/icon.png" />
<!----><link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
<!----><script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<!----><script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<!----><script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.2.19.min.js"></script>
<!----><link href="/css/all.css" rel="stylesheet" />
<!----><script src="/js/all.js"></script>
<!---------------------->


<link rel="stylesheet" href="jquery-ui/jquery-ui.css">
<script type="text/javascript" src="jquery-ui/jquery-ui.min.js"></script>
<meta name="viewport" content="initial-scale=1.0">
<style>
.act {
	width:100%; background:rgba(232,228,228,1.00);
	border-bottom:1px white solid;
}
#act .title {
	width:100%;
}
#act .input-area {
	font-size:16px;
	width:100%;
}
</style>
</head>

<body>

<div class="row">
	<div class="container">
	<h1> GG3-m </h1>
	<div id="act">
	
		<h3>上課問問題</h3>
		
		<input type="number" id="ask" class="input-area"/>
		<h3 class="title">上課回答問題</h3>
		<input type="number"  class="input-area" id="reply" ></input>
			<h3 class="title">完成老師出題</h3>
		<input type="number"  id="answer"  class="input-area" ></input>
				<h3 class="title">小組競賽得分</h3>
		<input type="number"  id="group"  class="input-area"></input>
	
		</div>
		</div>
	</div>
</div>

<style>
#foot {
	position:fixed;
	bottom:0;
	left:0;
	width:100%;
	background:rgba(209,209,209,1.00);
	padding:10px;
}
</style>
<div id="foot">
	<button class="btn btn-primary center-block" style="width:80%;">送出</button>
</div>

<script type="text/javascript">
  $(function() {
    $( "#act" ).accordion({
			"header": "ui-icon-triangle-1-e",
			"activeHeader": "ui-icon-triangle-1-s",
      collapsible: true,
	 	   header: "h3",
				heightStyle: "content",
			 activate: function (event,ui) {
				 if (ui.newPanel.length !== 0 ){
				 
				 $(ui.newPanel).trigger("click");
				 $(ui.newPanel).select();
				 $(ui.newPanel).focus();
				 }else {// 當縮起來的時候
				 }
			},animate:200
    });
  });
	
function qurUsers(){
	var q = new Parse.Query( Parse.Object.extend("Test_User"));
	return q.find();
}



function makeAutofill (a){
	var autoFillArr = new Array();
	var idRefArr = new Object ();
	console.log(a.length);
	var p = new Parse.Promise();
	for (var i = 0 ; i < a.length ; i++)
	{
		var id = a[i].get("uid");
		autoFillArr.push(id);
		idRefArr[id] = a[i];
	}
	p.resolve([autoFillArr,idRefArr]);
	return p ;
}

/*
function qur (){
	var Event_Record = Parse.Object.extend("Event_Record");
	var record = new Event_Record();
}*/
function initAutofill (arr){
	var autoFillArr = arr[0];
	var idRefArr = arr[1];
	console.log(autoFillArr);
	$(".input-area").autocomplete({
		select: function( e, ui ) {
			alert("test");
		},
		source:autoFillArr
	});
	
}


(function start(){
	console.log ("starting");
	qurUsers()
		.then(makeAutofill,handleError)
		.then(initAutofill,handleError);
})();


	
	
	

</script>



  <!--script type="text/javascript">
    window.addEventListener('DOMContentLoaded', function() {
      var button = document.querySelector('#button');
      var input = document.querySelector('#input');
      var focus = function(e) {
        e.stopPropagation();
        e.preventDefault();
        var clone = input.cloneNode(true);
        var parent = input.parentElement;
        parent.appendChild(clone);
        parent.replaceChild(clone, input);
        input = clone;
        window.setTimeout(function() {
          input.value = input.value || "";
          input.focus();
        }, 0);
      }
      button.addEventListener('mousedown', focus);
      button.addEventListener('touchstart', focus);
    }, false);
  </script-->
	<!--script src="js/jquery-mobile.js"></script-->

</body>
</html> 