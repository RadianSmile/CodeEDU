<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Untitled Document</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
<link href="css.css" rel="stylesheet"> 
</head>

<body>

<form id="submitAssign">
	<input id="link" placeholder="請貼入作業pde檔連結" style="width:400px; padding:10px;"><br>
	<input id="submit" type="button" value="送出作業" style="padding:10px;">
</form>

<div id="editor-container">
	<div id="editor">

	</div>
</div>

<script type="text/javascript">
$("#submit").on('click',function(){
    toSubmit($('#link').val());
    return false;
});

</script>

<script>
    var callback = function (data, status, xhr) {
        //data will be the xml returned from the server
        if (status == 'success') {
            var editor = ace.edit("editor");
            //apparently, only modes supported are 'html', 'javascript' & 'text'
  		      //editor.setTheme("ace/theme/twilight");
	editor.getSession().setTabSize(4);
	document.getElementById('editor').style.fontSize='16px';
		        editor.getSession().setMode("ace/mode/java");
            editor.setValue(data);
					
						
	function setEditorHeight(){
		var lastLine = $("#editor .ace_gutter-cell:last");
		var neededHeight = lastLine.position().top + lastLine.outerHeight();
		$("#editor-container").height(neededHeight);
	}
		setEditorHeight();
	$(window).on('resize', setEditorHeight);
						
        }
    };
    //using jQuery to fire off an ajax request to load the xml,
    //using our callback as the success function
    function toSubmit (url){
        $.ajax(
            {
                url : url,
                dataType : 'text', //explicitly requesting the xml as text, rather than an xml document
                success : callback
            }
        );
    }

</script>

<iframe id="ajax-iframe" src="http://radiansmile.github.io/CodeEDU/final_11/final_11.pde" width="300px" height="300px"></iframe>

<div id="test">

</div>

<script type="text/javascript">
    $("#ajax-iframe").contents().find( "body" ).css( "color", "#BADA55" );
    //console.log ("a , ",a);
    //$("#test").html(a);

</script>
</body>
</html>
